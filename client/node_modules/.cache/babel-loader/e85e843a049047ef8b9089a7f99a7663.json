{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\popes\\\\React\\\\online-voting\\\\client\\\\src\\\\Comments.js\";\nimport React from 'react';\nimport { Comment, Avatar, Form, Button, List, Input } from 'antd';\nconst TextArea = Input.TextArea;\n\nconst CommentList = ({\n  comments\n}) => React.createElement(List, {\n  dataSource: comments,\n  header: \"\".concat(comments.length, \" Comments\"),\n  itemLayout: \"horizontal\",\n  renderItem: props => React.createElement(Comment, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  })),\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8\n  },\n  __self: this\n});\n\nconst Editor = ({\n  onChange,\n  onSubmit,\n  submitting,\n  value\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}, React.createElement(Form.Item, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}, React.createElement(TextArea, {\n  rows: 4,\n  onChange: onChange,\n  value: value,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19\n  },\n  __self: this\n})), React.createElement(Form.Item, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21\n  },\n  __self: this\n}, React.createElement(Button, {\n  htmlType: \"submit\",\n  loading: submitting,\n  onClick: onSubmit,\n  type: \"primary\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22\n  },\n  __self: this\n}, \"Add Comment\")));\n\nexport default class Comments extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = () => {\n      if (!this.state.value || !this.props.user) {\n        return;\n      }\n\n      this.setState({\n        submitting: true\n      });\n      fetch('http://localhost:3001/api/comment', {\n        method: 'POST',\n        body: JSON.stringify({\n          pollId: this.props.data.id,\n          authorId: this.props.user._id,\n          authorName: this.props.user.name,\n          value: this.state.value\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          res.json().then(data => {\n            this.setState({\n              submitting: false,\n              value: '',\n              comments: [{\n                author: data.authorName,\n                avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png',\n                content: React.createElement(\"p\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 83\n                  },\n                  __self: this\n                }, data.content),\n                datetime: data.createdAt\n              }, ...this.state.comments]\n            });\n          });\n        }\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        value: e.target.value\n      });\n    };\n\n    this.state = {\n      submitting: false,\n      value: \"\",\n      comments: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.data.comments.length === 0) return;\n    const comments = this.props.data.comments.map(comment => {\n      return {\n        author: comment.authorName,\n        avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png',\n        content: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, comment.content),\n        datetime: comment.createdAt\n      };\n    });\n    this.setState({\n      comments: comments\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          comments = _this$state.comments,\n          submitting = _this$state.submitting,\n          value = _this$state.value;\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, comments.length > 0 && React.createElement(CommentList, {\n      comments: comments,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Comment, {\n      avatar: React.createElement(Avatar, {\n        src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n        alt: \"Han Solo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }),\n      content: React.createElement(Editor, {\n        onChange: this.handleChange,\n        onSubmit: this.handleSubmit,\n        submitting: submitting,\n        value: value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\popes\\React\\online-voting\\client\\src\\Comments.js"],"names":["React","Comment","Avatar","Form","Button","List","Input","TextArea","CommentList","comments","length","props","Editor","onChange","onSubmit","submitting","value","Comments","Component","constructor","handleSubmit","state","user","setState","fetch","method","body","JSON","stringify","pollId","data","id","authorId","_id","authorName","name","headers","then","res","status","json","author","avatar","content","datetime","createdAt","handleChange","e","target","componentWillMount","map","comment","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Comment, Avatar, Form, Button, List, Input } from 'antd';\r\n\r\nconst { TextArea } = Input;\r\n\r\n\r\nconst CommentList = ({ comments }) => (\r\n    <List\r\n        dataSource={comments}\r\n        header={`${comments.length} Comments`}\r\n        itemLayout=\"horizontal\"\r\n        renderItem={props => <Comment {...props} />}\r\n    />\r\n);\r\n\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n    <div>\r\n        <Form.Item>\r\n            <TextArea rows={4}  onChange={onChange} value={value} />\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\r\n                Add Comment\r\n            </Button>\r\n        </Form.Item>\r\n    </div>\r\n);\r\n\r\nexport default class Comments extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            submitting: false,\r\n            value: \"\",\r\n            comments: []\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        if(this.props.data.comments.length === 0)\r\n            return;\r\n\r\n        const comments = this.props.data.comments.map(comment => {\r\n            return {\r\n                author: comment.authorName,\r\n                avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png',\r\n                content: <p>{comment.content}</p>,\r\n                datetime: comment.createdAt\r\n            }\r\n        });\r\n        this.setState({\r\n            comments: comments,\r\n        });\r\n    }\r\n\r\n\r\n    handleSubmit = () => {\r\n        if(!this.state.value || !this.props.user){\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            submitting: true,\r\n        });\r\n\r\n        fetch('http://localhost:3001/api/comment', {\r\n            method: 'POST',\r\n            body: JSON.stringify({pollId: this.props.data.id, authorId: this.props.user._id ,authorName: this.props.user.name, value: this.state.value}),\r\n            headers: {\r\n                'Content-Type' : 'application/json'\r\n            }\r\n        })\r\n            .then(res => {\r\n                if(res.status === 200){\r\n                    res.json().then(data => {\r\n                        this.setState({\r\n                            submitting: false,\r\n                            value: '',\r\n                            comments: [{\r\n                                author: data.authorName,\r\n                                avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png',\r\n                                content: <p>{data.content}</p>,\r\n                                datetime: data.createdAt\r\n                            },\r\n                                ... this.state.comments\r\n                            ],\r\n                        });\r\n\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            value: e.target.value,\r\n        });\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    render(){\r\n        const { comments, submitting, value } = this.state;\r\n        return(\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-12\">\r\n                {comments.length > 0 && <CommentList comments={comments} />}\r\n                <Comment\r\n                    avatar={\r\n                        <Avatar\r\n                            src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\r\n                            alt=\"Han Solo\"\r\n                        />\r\n                    }\r\n                    content={\r\n                        <Editor\r\n                            onChange={this.handleChange}\r\n                            onSubmit={this.handleSubmit}\r\n                            submitting={submitting}\r\n                            value={value}\r\n                        />\r\n                    }\r\n                />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}