{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\popes\\\\React\\\\online-voting\\\\client\\\\src\\\\App.js\";\nimport React from 'react';\nimport ControlledCarousel from './ControlledCarousel';\nimport ReactNotification from \"react-notifications-component\";\nimport Modal from \"react-bootstrap/Modal\";\nimport \"react-notifications-component/dist/theme.css\";\nimport Form from \"react-bootstrap/Form\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport Button from \"react-bootstrap/Button\";\nimport FlipMove from \"react-flip-move\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport axios from 'axios';\nimport { Spin, Divider } from 'antd';\nimport ListPolls from './ListPolls';\nexport default class App extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.showNotification = (ref, message, title, type, duration) => {\n      ref.current.addNotification({\n        title: title,\n        message: message,\n        type: type,\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animated\", \"fadeIn\"],\n        animationOut: [\"animated\", \"fadeOut\"],\n        dismiss: {\n          duration: duration\n        },\n        dismissable: {\n          click: true\n        }\n      });\n    };\n\n    this.openModal = () => {\n      if (this.state.loggedIn) {\n        this.setState({\n          lgShow: true\n        });\n      } else {\n        this.showNotification(this.notificationDOMRef, \"You have to be logged in to create a poll! Redirecting to Login page shortly! \", \"Info\", \"warning\", 2000);\n        setTimeout(() => this.props.history.push('/login'), 1500);\n      }\n    };\n\n    this.addOptions = () => {\n      let hasSame = false;\n\n      for (let i = 0; i < this.state.options.length; i++) {\n        if (this.state.options[i].key === this.textInput.value) {\n          hasSame = true;\n          break;\n        }\n      }\n\n      if (this.textInput.value.localeCompare(\"\") !== 0 && !hasSame) {\n        let options = this.state.options;\n        options.push({\n          name: this.textInput.value,\n          key: this.textInput.value,\n          votes: 0\n        });\n        this.setState({\n          options: options\n        }, () => {\n          this.textInput.value = \"\";\n        });\n      }\n    };\n\n    this.deleteItem = key => {\n      let filteredItems = this.state.options.filter(item => {\n        return item.key !== key;\n      });\n      this.setState({\n        options: filteredItems\n      });\n    };\n\n    this.onRegister = () => {\n      if (this.pollDescription.value.length === 0 || this.pollTitle.value.length === 0 || this.state.options.length === 0 || this.state.options.length === 0) {\n        this.showNotification(this.notificationDOM, \"All fields must not be empty!\", \"Error\", \"danger\", 2000);\n      } else {\n        let data = {\n          author: this.state.name,\n          authorId: this.state.user._id,\n          title: this.pollTitle.value,\n          options: this.state.options,\n          expireDate: this.state.endDate,\n          description: this.pollDescription.value\n        };\n        let toUpload = new FormData();\n        toUpload.append('file', this.state.selectedFile);\n        toUpload.append('json', JSON.stringify(data));\n        this.setState({\n          loading: true\n        });\n        axios.post(\"http://localhost:3001/api/upload\", toUpload, {}).then(res => {\n          if (res.status === 200) {\n            this.showNotification(this.notificationDOMRef, \"The poll was successfully created!\", \"Success\", \"success\", 2000);\n            this.setState({\n              lgShow: false,\n              loading: false\n            });\n          }\n        });\n      }\n    };\n\n    this.handleChange = date => {\n      this.setState({\n        endDate: date\n      });\n    };\n\n    this.handleFileChange = event => {\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.state = {\n      lgShow: false,\n      name: \"\",\n      options: [],\n      endDate: new Date(),\n      selectedFile: null,\n      loading: false,\n      user: null,\n      loggedIn: false\n    };\n    this.notificationDOMRef = React.createRef();\n    this.notificationDOM = React.createRef();\n  }\n\n  componentWillMount() {\n    const token = sessionStorage.getItem('jwtToken');\n\n    if (token) {\n      fetch(\"http://localhost:3001/api/verify\", {\n        method: 'GET',\n        headers: new Headers({\n          'Authorization': token,\n          'Content-Type': 'application/x-www-form-urlencoded'\n        })\n      }).then(res => {\n        if (res.status === 200) {\n          res.json().then(data => {\n            this.setState({\n              name: data.name,\n              user: data,\n              loggedIn: true\n            });\n          });\n        }\n      });\n    } else {\n      this.setState({\n        loggedIn: false\n      });\n    }\n  }\n\n  render() {\n    let lgClose = () => this.setState({\n      lgShow: false\n    });\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(ReactNotification, {\n      ref: this.notificationDOMRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container-fluid p-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(ControlledCarousel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row justify-content-md-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 my-3 d-flex align-items-center flex-column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"To create your own poll, press the following button.\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary hvr-bob\",\n      onClick: this.openModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Create Poll\")))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      size: \"lg\",\n      show: this.state.lgShow,\n      onHide: lgClose,\n      \"aria-labelledby\": \"example-modal-sizes-title-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(ReactNotification, {\n      ref: this.notificationDOM,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      id: \"example-modal-sizes-title-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"Create A Poll\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"exampleForm.ControlInput1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Poll Title\"), React.createElement(Form.Control, {\n      type: \"email\",\n      placeholder: \"Enter Title For The Poll\",\n      ref: input => this.pollTitle = input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"exampleForm.ControlSelect1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Add Voting Options\"), React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      placeholder: \"Voting Option\",\n      \"aria-label\": \"Voting Option\",\n      \"aria-describedby\": \"basic-addon2\",\n      ref: input => this.textInput = input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(InputGroup.Append, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.addOptions,\n      variant: \"outline-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Add\"))), React.createElement(\"ul\", {\n      className: \"listOptions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(FlipMove, {\n      duration: 250,\n      easing: \"ease-out\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, this.state.options.map(t => {\n      return React.createElement(\"li\", {\n        className: \"lis hvr-bounce-out\",\n        onClick: () => this.deleteItem(t.key),\n        key: t.key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, t.name);\n    })))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"datePicker\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"How Long Will This Poll Be Active?\"), React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(DatePicker, {\n      inline: true,\n      selected: this.state.endDate,\n      onChange: this.handleChange,\n      showTimeSelect: true,\n      timeFormat: \"HH:mm\",\n      timeIntervals: 15,\n      dateFormat: \"MMMM d, yyyy h:mm aa\",\n      timeCaption: \"Time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    })))), React.createElement(Col, {\n      md: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"fileUpload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Upload Your Image\"), React.createElement(\"form\", {\n      method: \"post\",\n      action: \"#\",\n      id: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group files\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      className: \"form-control\",\n      multiple: \"\",\n      onChange: this.handleFileChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    })))))), React.createElement(Form.Group, {\n      controlId: \"exampleForm.ControlTextarea1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, \"Description\"), React.createElement(Form.Control, {\n      as: \"textarea\",\n      rows: \"3\",\n      ref: input => this.pollDescription = input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    })), React.createElement(Button, {\n      onClick: this.onRegister,\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, \"Submit\")))), React.createElement(Spin, {\n      spinning: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    })), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"All Polls\"), React.createElement(ListPolls, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\popes\\React\\online-voting\\client\\src\\App.js"],"names":["React","ControlledCarousel","ReactNotification","Modal","Form","InputGroup","FormControl","Button","FlipMove","DatePicker","Row","Col","axios","Spin","Divider","ListPolls","App","Component","constructor","props","context","showNotification","ref","message","title","type","duration","current","addNotification","insert","container","animationIn","animationOut","dismiss","dismissable","click","openModal","state","loggedIn","setState","lgShow","notificationDOMRef","setTimeout","history","push","addOptions","hasSame","i","options","length","key","textInput","value","localeCompare","name","votes","deleteItem","filteredItems","filter","item","onRegister","pollDescription","pollTitle","notificationDOM","data","author","authorId","user","_id","expireDate","endDate","description","toUpload","FormData","append","selectedFile","JSON","stringify","loading","post","then","res","status","handleChange","date","handleFileChange","event","target","files","Date","createRef","componentWillMount","token","sessionStorage","getItem","fetch","method","headers","Headers","json","render","lgClose","input","map","t"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ControlledCarousel from './ControlledCarousel';\r\nimport ReactNotification from \"react-notifications-component\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport \"react-notifications-component/dist/theme.css\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport FlipMove from \"react-flip-move\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport axios from 'axios';\r\nimport { Spin, Divider } from 'antd';\r\nimport ListPolls from './ListPolls';\r\n\r\n\r\n\r\nexport default class App extends React.Component {\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        this.state = {\r\n            lgShow: false,\r\n            name: \"\",\r\n            options: [],\r\n            endDate: new Date(),\r\n            selectedFile: null,\r\n            loading: false,\r\n            user: null,\r\n            loggedIn:false\r\n        };\r\n        this.notificationDOMRef = React.createRef();\r\n        this.notificationDOM = React.createRef();\r\n    }\r\n\r\n    componentWillMount(){\r\n        const token = sessionStorage.getItem('jwtToken');\r\n        if(token){\r\n            fetch(\"http://localhost:3001/api/verify\", {\r\n                method: 'GET',\r\n                headers: new Headers({\r\n                    'Authorization': token,\r\n                    'Content-Type': 'application/x-www-form-urlencoded'\r\n                })\r\n            })\r\n                .then(res => {\r\n                    if(res.status === 200){\r\n\r\n                        res.json().then(data => {\r\n                            this.setState({ name: data.name, user:data, loggedIn:true});\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n        }\r\n        else{\r\n            this.setState({\r\n                loggedIn: false\r\n            });\r\n        }\r\n\r\n\r\n    };\r\n\r\n    showNotification = (ref,message, title, type, duration) => {\r\n\r\n        ref.current.addNotification({\r\n            title: title,\r\n            message: message,\r\n            type: type,\r\n            insert: \"top\",\r\n            container: \"top-center\",\r\n            animationIn: [\"animated\", \"fadeIn\"],\r\n            animationOut: [\"animated\", \"fadeOut\"],\r\n            dismiss: { duration: duration },\r\n            dismissable: { click: true }\r\n        });\r\n\r\n    };\r\n\r\n\r\n    openModal = () => {\r\n        if(this.state.loggedIn){\r\n            this.setState({\r\n                lgShow: true\r\n            });\r\n        }\r\n        else{\r\n            this.showNotification(this.notificationDOMRef,\"You have to be logged in to create a poll! Redirecting to Login page shortly! \",\"Info\",\"warning\",2000);\r\n            setTimeout(() => this.props.history.push('/login'),1500);\r\n        }\r\n\r\n\r\n    };\r\n\r\n    addOptions= () => {\r\n        let hasSame = false;\r\n         for(let i=0; i<this.state.options.length;i++){\r\n             if(this.state.options[i].key === this.textInput.value){\r\n                 hasSame = true;\r\n                 break;\r\n             }\r\n         }\r\n        if(this.textInput.value.localeCompare(\"\") !== 0 && !hasSame) {\r\n            let options = this.state.options;\r\n            options.push(\r\n                {\r\n                    name: this.textInput.value,\r\n                    key: this.textInput.value,\r\n                    votes: 0\r\n                }\r\n            );\r\n            this.setState({\r\n                options: options\r\n            }, () => {this.textInput.value=\"\";});\r\n        }\r\n    };\r\n\r\n    deleteItem = (key) => {\r\n      let filteredItems =  this.state.options.filter(item => {\r\n          return (item.key !== key);\r\n      });\r\n      this.setState({\r\n          options: filteredItems\r\n      });\r\n    };\r\n\r\n    onRegister = () =>{\r\n      if(this.pollDescription.value.length === 0 || this.pollTitle.value.length === 0 || this.state.options.length ===0 || this.state.options.length === 0){\r\n\r\n          this.showNotification(this.notificationDOM,\"All fields must not be empty!\", \"Error\", \"danger\", 2000);\r\n      }\r\n      else{\r\n        let data = {\r\n            author: this.state.name,\r\n            authorId: this.state.user._id,\r\n            title: this.pollTitle.value,\r\n            options: this.state.options,\r\n            expireDate: this.state.endDate,\r\n            description: this.pollDescription.value\r\n        };\r\n\r\n        let toUpload = new FormData();\r\n        toUpload.append('file', this.state.selectedFile);\r\n        toUpload.append('json', JSON.stringify(data));\r\n        this.setState({\r\n            loading: true\r\n        });\r\n        axios.post(\"http://localhost:3001/api/upload\", toUpload, {\r\n\r\n        })\r\n            .then(res=>{\r\n                if(res.status === 200) {\r\n                    this.showNotification(this.notificationDOMRef,\"The poll was successfully created!\", \"Success\", \"success\", 2000);\r\n                    this.setState({\r\n                        lgShow: false,\r\n                        loading: false,\r\n                    })\r\n                }\r\n            })\r\n\r\n      }\r\n\r\n    };\r\n\r\n    handleChange = (date) => {\r\n        this.setState({\r\n            endDate: date\r\n        });\r\n\r\n    };\r\n\r\n    handleFileChange = (event) => {\r\n        this.setState({\r\n            selectedFile: event.target.files[0]\r\n        })\r\n    };\r\n\r\n\r\n    render() {\r\n        let lgClose = () => this.setState({ lgShow: false });\r\n        return (\r\n            <div>\r\n                <ReactNotification ref={this.notificationDOMRef} />\r\n                <div className=\"container-fluid p-0\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-12\">\r\n                            <ControlledCarousel/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"container\">\r\n                    <div className=\"row justify-content-md-center\">\r\n                        <div className=\"col-md-6 my-3 d-flex align-items-center flex-column\">\r\n                            <h5>To create your own poll, press the following button.</h5>\r\n                            <button type=\"button\" className=\"btn btn-secondary hvr-bob\" onClick={this.openModal}>Create Poll</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <Modal\r\n                        size=\"lg\"\r\n                        show={this.state.lgShow}\r\n                        onHide={lgClose}\r\n                        aria-labelledby=\"example-modal-sizes-title-lg\"\r\n                    >\r\n                        <ReactNotification ref={this.notificationDOM} />\r\n                        <Modal.Header closeButton>\r\n                            <Modal.Title id=\"example-modal-sizes-title-lg\">\r\n                                Create A Poll\r\n                            </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <Form.Group>\r\n                                <Form.Group controlId=\"exampleForm.ControlInput1\">\r\n                                    <Form.Label>Poll Title</Form.Label>\r\n                                    <Form.Control type=\"email\" placeholder=\"Enter Title For The Poll\" ref={input => this.pollTitle = input}/>\r\n                                </Form.Group>\r\n                                <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                    <Form.Label>Add Voting Options</Form.Label>\r\n                                    <InputGroup className=\"mb-3\">\r\n                                        <FormControl\r\n                                            placeholder=\"Voting Option\"\r\n                                            aria-label=\"Voting Option\"\r\n                                            aria-describedby=\"basic-addon2\"\r\n                                            ref={input => this.textInput = input}\r\n                                        />\r\n                                        <InputGroup.Append>\r\n                                            <Button onClick = {this.addOptions} variant=\"outline-secondary\">Add</Button>\r\n                                        </InputGroup.Append>\r\n                                    </InputGroup>\r\n\r\n                                    <ul className=\"listOptions\">\r\n                                        <FlipMove duration={250} easing=\"ease-out\">\r\n                                            {\r\n                                                this.state.options.map(t => {return <li className=\"lis hvr-bounce-out\" onClick={() => this.deleteItem(t.key)} key={t.key}>{t.name}</li>})\r\n                                            }\r\n                                        </FlipMove>\r\n                                    </ul>\r\n\r\n                                </Form.Group>\r\n                                <Row>\r\n                                    <Col>\r\n                                <Form.Group controlId=\"datePicker\">\r\n                                    <Form.Label>How Long Will This Poll Be Active?</Form.Label>\r\n                                    <InputGroup>\r\n                                    <DatePicker\r\n                                        inline\r\n                                        selected={this.state.endDate}\r\n                                        onChange={this.handleChange}\r\n                                        showTimeSelect\r\n                                        timeFormat=\"HH:mm\"\r\n                                        timeIntervals={15}\r\n                                        dateFormat=\"MMMM d, yyyy h:mm aa\"\r\n                                        timeCaption=\"Time\"\r\n                                    />\r\n                                    </InputGroup>\r\n                                </Form.Group>\r\n                                    </Col>\r\n                                    <Col md=\"6\">\r\n                                    <Form.Group controlId=\"fileUpload\">\r\n                                        <Form.Label >Upload Your Image</Form.Label>\r\n                                            <form method=\"post\" action=\"#\" id=\"#\">\r\n                                                <div className=\"form-group files\">\r\n                                                    <input type=\"file\" className=\"form-control\" multiple=\"\" onChange={this.handleFileChange}/>\r\n                                                </div>\r\n\r\n                                            </form>\r\n                                    </Form.Group>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n                                    <Form.Label>Description</Form.Label>\r\n                                    <Form.Control as=\"textarea\" rows=\"3\" ref={input => this.pollDescription = input}/>\r\n                                </Form.Group>\r\n                                <Button onClick={this.onRegister} variant=\"primary\" >\r\n                                    Submit\r\n                                </Button>\r\n                            </Form.Group>\r\n                        </Modal.Body>\r\n                    </Modal>\r\n                    <Spin spinning={this.state.loading}/>\r\n                </div>\r\n                <Divider>All Polls</Divider>\r\n                <ListPolls/>\r\n            </div>\r\n\r\n                )\r\n        }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}