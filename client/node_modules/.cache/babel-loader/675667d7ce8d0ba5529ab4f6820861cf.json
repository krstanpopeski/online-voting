{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\popes\\\\React\\\\online-voting\\\\client\\\\src\\\\ListPolls.js\";\nimport React from 'react';\nimport \"antd/dist/antd.css\";\nimport \"./index.css\";\nimport { List, Avatar, Icon, Skeleton, Divider, Radio } from \"antd\";\nimport Modal from 'react-bootstrap/Modal';\nimport Image from 'react-bootstrap/Image';\n\nconst IconText = ({\n  type,\n  text\n}) => React.createElement(\"span\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 11\n  },\n  __self: this\n}, React.createElement(Icon, {\n  type: type,\n  style: {\n    marginRight: 8\n  },\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 12\n  },\n  __self: this\n}), text);\n\nconst poll = {\n  \"_id\": \"\",\n  \"author\": \"\",\n  \"authorId\": \"\",\n  \"title\": \"\",\n  \"options\": [{\n    \"_id\": \"\",\n    \"name\": \"\",\n    \"key\": \"\",\n    \"votes\": 0\n  }, {\n    \"_id\": \"\",\n    \"name\": \"\",\n    \"key\": \"\",\n    \"votes\": 0\n  }],\n  \"expireDate\": \"\",\n  \"image\": {\n    \"_id\": \"\",\n    \"url\": \"\",\n    \"type\": \"\"\n  },\n  \"description\": \"\",\n  \"likes\": 0,\n  \"comments\": [],\n  \"createdAt\": \"\",\n  \"updatedAt\": \"\",\n  \"__v\": 0\n};\nexport default class ListPolls extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.populateData = () => {\n      let listData = [];\n      this.state.polls.forEach(item => {\n        listData.push({\n          title: item.title,\n          avatar: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n          content: item.description,\n          imageUrl: item.image.url,\n          createdAt: item.createdAt,\n          likes: item.likes,\n          comments: item.comments,\n          id: item._id\n        });\n      });\n      this.setState({\n        listData: listData\n      });\n    };\n\n    this.handlePollClick = id => {\n      this.setState({\n        visible: true,\n        selectedPoll: this.getPollById(id)\n      });\n    };\n\n    this.handleOk = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.getPollById = id => {\n      let poll = this.state.polls.filter(poll => {\n        return poll._id === id;\n      });\n      return poll[0];\n    };\n\n    this.onChange = e => {\n      this.setState({\n        radioValue: e.target.value\n      });\n    };\n\n    this.state = {\n      loading: false,\n      polls: [],\n      listData: [],\n      visible: false,\n      selectedPoll: poll,\n      radioValue: null\n    };\n  }\n\n  componentWillMount() {\n    this.setState({\n      loading: true\n    }, () => {\n      fetch('http://localhost:3001/api/polls').then(res => {\n        if (res.status === 200) {\n          res.json().then(data => {\n            this.setState({\n              loading: false,\n              polls: data,\n              selectedPoll: data[0]\n            }, () => {\n              this.populateData();\n            });\n          });\n        }\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Skeleton, {\n      loading: this.state.loading,\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(List, {\n      itemLayout: \"vertical\",\n      size: \"large\",\n      pagination: {\n        onChange: page => {\n          console.log(page);\n        },\n        pageSize: 3\n      },\n      dataSource: this.state.listData,\n      footer: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"ant design\"), \" footer part\"),\n      renderItem: item => React.createElement(List.Item, {\n        key: item.title,\n        actions: [React.createElement(IconText, {\n          type: \"like-o\",\n          text: item.likes,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }), React.createElement(IconText, {\n          type: \"message\",\n          text: item.comments.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        })],\n        extra: React.createElement(\"button\", {\n          className: \"invisible-button\",\n          onClick: () => this.handlePollClick(item.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          width: 272,\n          alt: \"logo\",\n          src: 'http://localhost:3001/api/image/' + item.imageUrl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(List.Item.Meta, {\n        avatar: React.createElement(Avatar, {\n          src: item.avatar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }),\n        title: React.createElement(\"button\", {\n          className: \"invisible-button\",\n          onClick: () => this.handlePollClick(item.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, item.title),\n        description: \"Created at: \".concat(new Date(this.state.selectedPoll.createdAt).toLocaleString('mk-MK', {\n          timeZone: 'UTC'\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }), item.content),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      size: \"lg\",\n      show: this.state.visible,\n      onHide: this.handleCancel,\n      \"aria-labelledby\": \"example-modal-sizes-title-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      id: \"example-modal-sizes-title-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, this.state.selectedPoll.title)), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Author: \", this.state.selectedPoll.author)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Created at: \", new Date(this.state.selectedPoll.createdAt).toLocaleString('mk-MK', {\n      timeZone: 'UTC'\n    })))), React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(Image, {\n      src: 'http://localhost:3001/api/image/' + this.state.selectedPoll.image.url,\n      alt: this.state.selectedPoll._id,\n      height: 300,\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Description:\"), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, this.state.selectedPoll.description)), React.createElement(Divider, {\n      orientation: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Voting Options\"), React.createElement(\"div\", {\n      className: \"col-md-3 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Radio.Group, {\n      onChange: this.onChange,\n      value: this.state.radioValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, this.state.selectedPoll.options.map(option => {\n      return React.createElement(Radio, {\n        value: option._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"bold\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, option.name));\n    })))))))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\popes\\React\\online-voting\\client\\src\\ListPolls.js"],"names":["React","List","Avatar","Icon","Skeleton","Divider","Radio","Modal","Image","IconText","type","text","marginRight","poll","ListPolls","Component","constructor","props","populateData","listData","state","polls","forEach","item","push","title","avatar","content","description","imageUrl","image","url","createdAt","likes","comments","id","_id","setState","handlePollClick","visible","selectedPoll","getPollById","handleOk","handleCancel","filter","onChange","e","radioValue","target","value","loading","componentWillMount","fetch","then","res","status","json","data","render","page","console","log","pageSize","length","Date","toLocaleString","timeZone","author","options","map","option","name"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport \"antd/dist/antd.css\";\r\nimport \"./index.css\";\r\nimport { List, Avatar, Icon, Skeleton, Divider, Radio } from \"antd\";\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Image from 'react-bootstrap/Image';\r\n\r\n\r\n\r\nconst IconText = ({ type, text }) => (\r\n    <span>\r\n    <Icon type={type} style={{ marginRight: 8 }} />\r\n        {text}\r\n  </span>\r\n);\r\n\r\n\r\nconst poll =\r\n    {\r\n        \"_id\": \"\",\r\n        \"author\": \"\",\r\n        \"authorId\": \"\",\r\n        \"title\": \"\",\r\n        \"options\": [\r\n            {\r\n                \"_id\": \"\",\r\n                \"name\": \"\",\r\n                \"key\": \"\",\r\n                \"votes\": 0\r\n            },\r\n            {\r\n                \"_id\": \"\",\r\n                \"name\": \"\",\r\n                \"key\": \"\",\r\n                \"votes\": 0\r\n            }\r\n        ],\r\n        \"expireDate\": \"\",\r\n        \"image\": {\r\n            \"_id\": \"\",\r\n            \"url\": \"\",\r\n            \"type\": \"\"\r\n        },\r\n        \"description\": \"\",\r\n        \"likes\": 0,\r\n        \"comments\": [],\r\n        \"createdAt\": \"\",\r\n        \"updatedAt\": \"\",\r\n        \"__v\": 0\r\n    };\r\n\r\nexport default class ListPolls extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state={\r\n            loading: false,\r\n            polls: [],\r\n            listData: [],\r\n            visible: false,\r\n            selectedPoll: poll,\r\n            radioValue: null\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        this.setState({\r\n            loading: true\r\n        }, () => {\r\n            fetch('http://localhost:3001/api/polls')\r\n                .then(res => {\r\n                    if (res.status === 200) {\r\n                        res.json().then(data => {\r\n                            this.setState({\r\n                                loading: false,\r\n                                polls: data,\r\n                                selectedPoll: data[0]\r\n                            }, () => {this.populateData()});\r\n                        })\r\n                    }\r\n                })\r\n        });\r\n\r\n    }\r\n\r\n    populateData = () => {\r\n          let listData = [];\r\n          this.state.polls.forEach(item => {\r\n              listData.push({\r\n                  title: item.title,\r\n                  avatar: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\r\n                  content: item.description,\r\n                  imageUrl: item.image.url,\r\n                  createdAt: item.createdAt,\r\n                  likes: item.likes,\r\n                  comments: item.comments,\r\n                  id: item._id\r\n              });\r\n          });\r\n          this.setState({\r\n              listData: listData\r\n          });\r\n\r\n    };\r\n\r\n    handlePollClick = (id) => {\r\n      this.setState({\r\n          visible: true,\r\n          selectedPoll: this.getPollById(id)\r\n      });\r\n    };\r\n\r\n    handleOk = () => {\r\n      this.setState({\r\n          visible: false\r\n      })\r\n    };\r\n\r\n\r\n    handleCancel = () => {\r\n      this.setState({\r\n          visible: false\r\n      })\r\n    };\r\n\r\n    getPollById = (id) =>{\r\n      let poll = this.state.polls.filter(poll => {\r\n          return poll._id === id;\r\n      });\r\n      return poll[0];\r\n    };\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            radioValue: e.target.value\r\n        });\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col md-12\">\r\n                        <Skeleton loading={this.state.loading} active>\r\n                        <List\r\n                            itemLayout=\"vertical\"\r\n                            size=\"large\"\r\n                            pagination={{\r\n                                onChange: page => {\r\n                                    console.log(page);\r\n                                },\r\n                                pageSize: 3\r\n                            }}\r\n                            dataSource={this.state.listData}\r\n                            footer={\r\n                                <div>\r\n                                    <b>ant design</b> footer part\r\n                                </div>\r\n                            }\r\n                            renderItem={item => (\r\n                                <List.Item\r\n                                    key={item.title}\r\n                                    actions={[\r\n                                        <IconText type=\"like-o\" text={item.likes} />,\r\n                                        <IconText type=\"message\" text= {item.comments.length}/>\r\n                                    ]}\r\n                                    extra={\r\n                                        <button className=\"invisible-button\" onClick={() => this.handlePollClick(item.id)}>\r\n                                        <img\r\n                                            width={272}\r\n                                            alt=\"logo\"\r\n                                            src={'http://localhost:3001/api/image/' + item.imageUrl}\r\n                                        />\r\n                                        </button>\r\n                                    }\r\n                                >\r\n                                    <List.Item.Meta\r\n                                        avatar={<Avatar src={item.avatar} />}\r\n                                        title={<button className=\"invisible-button\" onClick={() => this.handlePollClick(item.id)}>{item.title}</button>}\r\n                                        description={`Created at: ${new Date(this.state.selectedPoll.createdAt).toLocaleString('mk-MK', {timeZone: 'UTC'})}`}\r\n                                    />\r\n                                    {item.content}\r\n                                </List.Item>\r\n                            )}\r\n                        />\r\n                        </Skeleton>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <Modal\r\n                    size=\"lg\"\r\n                    show={this.state.visible}\r\n                    onHide={this.handleCancel}\r\n                    aria-labelledby=\"example-modal-sizes-title-lg\"\r\n                    >\r\n                        <Modal.Header closeButton>\r\n                         <Modal.Title id=\"example-modal-sizes-title-lg\">\r\n                             {this.state.selectedPoll.title}\r\n                            </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <div className=\"container\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <p><small>Author: {this.state.selectedPoll.author}</small></p>\r\n                                        <p><small>Created at: {new Date(this.state.selectedPoll.createdAt).toLocaleString('mk-MK', {timeZone: 'UTC'})}</small></p>\r\n                                    </div>\r\n                                    <div className=\"col-md-12\">\r\n                                        <Image src={'http://localhost:3001/api/image/' + this.state.selectedPoll.image.url}\r\n                                             alt={this.state.selectedPoll._id}\r\n                                             height={300}\r\n                                             fluid\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"col-md-12\">\r\n                                        <h6>Description:</h6>\r\n                                        <h6>{this.state.selectedPoll.description }</h6>\r\n                                    </div>\r\n                                    <Divider orientation=\"left\">Voting Options</Divider>\r\n                                    <div className=\"col-md-3 mx-auto\">\r\n                                        <Radio.Group onChange={this.onChange} value={this.state.radioValue}>\r\n                                            {\r\n                                                this.state.selectedPoll.options.map(option => {\r\n                                                    return <Radio value={option._id}><bold>{option.name}</bold></Radio>\r\n                                                })\r\n                                            }\r\n                                        </Radio.Group>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Modal.Body>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}